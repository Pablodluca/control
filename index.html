<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Controles Remotos Express</title>
  <script src="https://cdn.emailjs.com/dist/email.min.js"></script>
  <script type="text/javascript">
    (function(){
      emailjs.init("4eZ9TQHEEivaP5nyd"); // TU PUBLIC KEY DE EMAILJS
    })();
  </script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(to bottom right, #eff6ff, #e0f2fe);
      color: #1e293b;
      line-height: 1.6;
      padding: 20px;
    }
    .container {
      max-width: 800px;
      margin: 0 auto;
    }
    header {
      text-align: center;
      margin-bottom: 30px;
    }
    h1 {
      font-size: 2.5rem;
      font-weight: 800;
      margin-bottom: 10px;
      color: #0f172a;
    }
    .price-highlight {
      font-size: 1.25rem;
      color: #166534;
      font-weight: bold;
    }
    .card {
      background: white;
      border-radius: 16px;
      padding: 24px;
      margin-bottom: 24px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.05);
      border: 1px solid #e2e8f0;
    }
    .card-title {
      font-size: 1.5rem;
      font-weight: 700;
      margin-bottom: 8px;
      color: #0f172a;
    }
    .card-desc {
      color: #64748b;
      margin-bottom: 20px;
    }
    .form-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
      margin-bottom: 20px;
    }
    @media (max-width: 600px) {
      .form-grid { grid-template-columns: 1fr; }
    }
    label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: #334155;
    }
    input, textarea, button, select {
      width: 100%;
      padding: 12px;
      border: 1px solid #cbd5e1;
      border-radius: 8px;
      font-size: 16px;
    }
    input:focus, textarea:focus, select:focus {
      outline: none;
      border-color: #3b82f6;
    }
    .checkbox-group {
      display: flex;
      align-items: flex-start;
      gap: 12px;
      margin: 16px 0;
      padding: 16px;
      border-radius: 12px;
    }
    .pilas { background: #fef3c7; border: 2px solid #f59e0b; }
    .garantia { background: #dcfce7; border: 2px solid #16a34a; }
    .entrega {
      background: #dbeafe;
      border: 2px solid #3b82f6;
      padding: 16px;
      border-radius: 12px;
      margin: 20px 0;
    }
    .buy-button {
      background: linear-gradient(to right, #059669, #047857);
      color: white;
      font-weight: bold;
      font-size: 18px;
      padding: 16px;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      margin-top: 20px;
      box-shadow: 0 4px 12px rgba(5, 150, 105, 0.3);
    }
    .buy-button:hover {
      background: linear-gradient(to right, #047857, #065f46);
    }
    .buy-button:disabled {
      background: #94a3b8;
      cursor: not-allowed;
    }
    .status {
      padding: 12px;
      border-radius: 8px;
      margin: 16px 0;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .success { background: #dcfce7; color: #166534; border: 1px solid #bbf7d0; }
    .warning { background: #fef3c7; color: #92400e; border: 1px solid #fcd34d; }
    .icon { width: 20px; height: 20px; }
    footer {
      text-align: center;
      margin-top: 30px;
      color: #64748b;
      font-size: 0.9rem;
    }
    .photo-upload {
      border: 2px dashed #cbd5e1;
      border-radius: 12px;
      padding: 20px;
      text-align: center;
      margin-top: 16px;
      background: #f8fafc;
    }
    .photo-preview {
      max-width: 100%;
      max-height: 200px;
      margin-top: 12px;
      border-radius: 8px;
      display: none;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>Controles Remotos Express</h1>
      <p class="price-highlight">¬°Cualquier modelo por solo <strong>$20.000</strong>!</p>
    </header>

    <div class="card">
      <h2 class="card-title">¬øC√≥mo identificamos tu control?</h2>
      <p class="card-desc">Elige una opci√≥n para ayudarnos a encontrar tu control</p>

      <label><input type="radio" name="identificacion" value="modelo" checked onchange="toggleInput('modelo')"> Tengo el modelo del control</label>
      <input type="text" id="modelo" placeholder="Ej: Samsung BN59-01315A, LG AKB750B, etc." style="margin-top: 12px;" />

      <label style="margin-top: 16px;"><input type="radio" name="identificacion" value="foto" onchange="toggleInput('foto')"> No s√© el modelo ‚Üí subir foto</label>
      
      <div class="photo-upload" id="fotoSection" style="display: none;">
        <p>üì∏ Sube una foto clara del control remoto (frente y/o dorso)</p>
        <input type="file" id="fotoControl" accept="image/*" onchange="previewFoto(event)" style="margin-top: 12px;" />
        <img id="fotoPreview" class="photo-preview" />
      </div>
    </div>

    <div class="card">
      <h2 class="card-title">Informaci√≥n de Contacto y Entrega</h2>
      <p class="card-desc">Completa todos los datos para coordinar tu pedido</p>

      <div class="form-grid">
        <div>
          <label for="nombre">Nombre *</label>
          <input type="text" id="nombre" placeholder="Tu nombre" required />
        </div>
        <div>
          <label for="apellido">Apellido *</label>
          <input type="text" id="apellido" placeholder="Tu apellido" required />
        </div>
      </div>

      <label for="localidad">Localidad *</label>
      <select id="localidad" required>
        <option value="">Selecciona tu localidad</option>
        <option value="San Mart√≠n">San Mart√≠n</option>
        <option value="Otra">Otra localidad</option>
      </select>

      <label for="direccion">Direcci√≥n de entrega *</label>
      <input type="text" id="direccion" placeholder="Calle, n√∫mero, piso, depto, entre calles..." required />

      <label for="email">Email (opcional)</label>
      <input type="email" id="email" placeholder="tu@email.com" />

      <div class="entrega">
        <strong>üöö Pol√≠tica de Entrega:</strong><br>
        ‚Ä¢ <strong>San Mart√≠n</strong>: Entrega sin cargo los s√°bados y domingos.<br>
        ‚Ä¢ <strong>Resto del pa√≠s</strong>: Con cargo (var√≠a seg√∫n ubicaci√≥n).
      </div>

      <div class="checkbox-group pilas">
        <input type="checkbox" id="pilas" style="width: auto; margin-top: 4px;" />
        <label for="pilas" style="font-weight: bold; margin: 0;">
          üîã Incluir pilas (+$4000) - 2 pilas AAA o AA
        </label>
      </div>

      <div class="checkbox-group garantia">
        <input type="checkbox" id="garantia" style="width: auto; margin-top: 4px;" />
        <label for="garantia" style="font-weight: bold; margin: 0;">
          üõ°Ô∏è Garant√≠a extendida de 1 a√±o (+$1500)
        </label>
      </div>

      <label for="comentarios">Comentarios adicionales</label>
      <textarea id="comentarios" rows="3" placeholder="Ej: Marca del TV, modelo aproximado, horario de entrega, etc."></textarea>

      <div id="status"></div>

      <button class="buy-button" onclick="enviarPedido()" id="submitBtn">
        üõí COMPRAR AHORA - $20.000
      </button>
      <p id="hint" style="text-align: center; margin-top: 12px; color: #64748b;">
        üí≥ Pago en efectivo al recibir
      </p>
    </div>

    <footer>
      <p>¬øNecesitas ayuda? Cont√°ctanos:</p>
      <p><strong>pablodeluca214@gmail.com</strong></p>
    </footer>
  </div>

  <script>
    function toggleInput(tipo) {
      if (tipo === 'modelo') {
        document.getElementById('modelo').style.display = 'block';
        document.getElementById('fotoSection').style.display = 'none';
      } else {
        document.getElementById('modelo').style.display = 'none';
        document.getElementById('fotoSection').style.display = 'block';
      }
    }

    function previewFoto(event) {
      const file = event.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
          const preview = document.getElementById('fotoPreview');
          preview.src = e.target.result;
          preview.style.display = 'block';
        };
        reader.readAsDataURL(file);
      }
    }

    function enviarPedido() {
      const modeloInput = document.getElementById("modelo");
      const fotoInput = document.getElementById("fotoControl");
      const nombre = document.getElementById("nombre").value.trim();
      const apellido = document.getElementById("apellido").value.trim();
      const localidad = document.getElementById("localidad").value;
      const direccion = document.getElementById("direccion").value.trim();
      const statusDiv = document.getElementById("status");
      const submitBtn = document.getElementById("submitBtn");

      // Validar datos obligatorios
      if (!nombre || !apellido || !localidad || !direccion) {
        statusDiv.className = "status warning";
        statusDiv.innerHTML = '<span class="icon">‚ö†Ô∏è</span> Completa todos los campos obligatorios.';
        return;
      }

      let modelo = "";
      let fotoBase64 = "";

      if (modeloInput.style.display !== "none" && modeloInput.value.trim()) {
        modelo = modeloInput.value.trim();
      } else if (fotoInput.files.length > 0) {
        const file = fotoInput.files[0];
        const reader = new FileReader();
        reader.onload = function() {
          fotoBase64 = reader.result;
          enviarConDatos(modelo, fotoBase64, nombre, apellido, localidad, direccion);
        };
        reader.readAsDataURL(file);
        submitBtn.disabled = true;
        submitBtn.textContent = "Procesando imagen...";
        return;
      } else {
        statusDiv.className = "status warning";
        statusDiv.innerHTML = '<span class="icon">‚ö†Ô∏è</span> Ingresa el modelo o sube una foto del control.';
        return;
      }

      enviarConDatos(modelo, fotoBase64, nombre, apellido, localidad, direccion);
    }

    function enviarConDatos(modelo, fotoBase64, nombre, apellido, localidad, direccion) {
      const statusDiv = document.getElementById("status");
      const submitBtn = document.getElementById("submitBtn");
      submitBtn.disabled = true;
      submitBtn.textContent = "Enviando...";

      let comentarios = document.getElementById("comentarios").value.trim();
      if (fotoBase64) {
        comentarios += "\n\n[Foto adjunta en base64 - ver en EmailJS]";
      }

      // Correcci√≥n: Usar el formato correcto para EmailJS
      const templateParams = {
        from_name: "Controles Remotos Express",
        to_email: "pablodeluca214@gmail.com",
        nombre: nombre,
        apellido: apellido,
        email: document.getElementById("email").value.trim() || "No proporcionado",
        modelo: modelo || "No especificado (foto adjunta)",
        localidad: localidad,
        direccion: direccion,
        pilas: document.getElementById("pilas").checked ? "S√ç (+$4000)" : "No",
        garantia: document.getElementById("garantia").checked ? "S√ç (+$1500)" : "No",
        comentarios: comentarios || "Sin comentarios",
        fecha: new Date().toLocaleDateString("es-ES"),
        precio: "$20.000"
      };

      console.log("Enviando datos a EmailJS:", templateParams); // Para depurar

      // Usar los valores correctos de EmailJS
      emailjs.send("service_9vr6zf9", "template_7qokobp", templateParams)
        .then(function(response) {
          console.log("√âxito:", response.status, response.text);
          statusDiv.className = "status success";
          statusDiv.innerHTML = '<span class="icon">‚úÖ</span> ¬°Pedido enviado! Revisa pablodeluca214@gmail.com para confirmar.';
          document.getElementById("hint").textContent = "¬°Gracias por tu compra!";
          submitBtn.style.display = "none";
        }, function(error) {
          console.error("Error:", error);
          statusDiv.className = "status warning";
          statusDiv.innerHTML = '<span class="icon">‚ùå</span> Error al enviar. Intenta nuevamente.';
          submitBtn.disabled = false;
          submitBtn.textContent = "üõí COMPRAR AHORA - $20.000";
        });
    }

    // Validaci√≥n en tiempo real
    document.getElementById("nombre").addEventListener("input", checkForm);
    document.getElementById("apellido").addEventListener("input", checkForm);
    document.getElementById("modelo").addEventListener("input", checkForm);
    document.getElementById("localidad").addEventListener("change", checkForm);
    document.getElementById("direccion").addEventListener("input", checkForm);

    function checkForm() {
      const nombre = document.getElementById("nombre").value.trim();
      const apellido = document.getElementById("apellido").value.trim();
      const localidad = document.getElementById("localidad").value;
      const direccion = document.getElementById("direccion").value.trim();
      const modelo = document.getElementById("modelo").value.trim();
      const foto = document.getElementById("fotoControl").files.length > 0;
      const hint = document.getElementById("hint");

      if (nombre && apellido && localidad && direccion && (modelo || foto)) {
        hint.textContent = "‚úÖ ¬°Todo listo! Haz clic para completar tu pedido";
        hint.style.color = "#166534";
      } else {
        hint.textContent = "üìù Completa todos los campos obligatorios";
        hint.style.color = "#64748b";
      }
    }
  </script>
</body>
</html>